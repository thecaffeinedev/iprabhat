I" 3<p><img src="./try_django_cover.jpg" alt="Cover image" /></p>

<p>This is the second part of our Intro To Django Tutorial, if you haven‚Äôt gone through our previous tutorial please make sure to check it out.</p>

<p>In this part of tutorial, we are going to do our migrations, create a sign up form and stuff.</p>

<p>So we need to think of our TodoApp features &amp; functionalities first.</p>

<h4 id="features">Features</h4>

<ul>
  <li>User SignUp
    <ul>
      <li>User should have an unique username</li>
      <li>User should give a password</li>
    </ul>
  </li>
  <li>User SignIn
    <ul>
      <li>After registration, user should be able to sign by using username and password</li>
    </ul>
  </li>
  <li>After SignIn
    <ul>
      <li>User should be able to add todo
        <ul>
          <li>A todo will have one title and a memo</li>
          <li>User can also specify if a todo is important or not</li>
        </ul>
      </li>
      <li>User can see the todo‚Äôs</li>
      <li>User can update, delete or mark complete on a todo.</li>
    </ul>
  </li>
  <li>User can logout</li>
</ul>

<p>So these are the features that we are going to work on.</p>

<p>Whenever we are working on this kind of projects or any big projects where there are multiple functionalities and moving pieces like here in our todo there is signup, signin, creating todo‚Äôs, listing todo‚Äôs and all, sometimes it‚Äôs harder to think like where should I even start the project.</p>

<p>So for me personally, I like to think from the User point of view, like If I am the user, If I will not be able to create todo‚Äôs without signup first right. I will not be able to logout If I don‚Äôt have an account and so on.</p>

<p>I would like to first SignUp in the website then, I will be able to login, then I will able to add my todo‚Äôs, see all todo‚Äôs, update or delete them when needed.</p>

<p>This gives us a clear idea where to being the project, like we need to implement user SignUp first, then we can work on login, logout and then we can move into creating todo objects, listing them, updating them and so on. If we kind of follow this flow, it will be really helpful for us to know where we are moving in our project.</p>

<p>Let‚Äôs go to our project folder named <strong>todo</strong> and run the server.</p>

<p><img src="./django2-1.png" alt="" /></p>

<p>You can see it‚Äôs giving us an warning saying <em>‚ÄúYou have 17 unapplied migration(s). ‚Äú</em> so let‚Äôs do the migrations, to do it run</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python manage.py migrate
</code></pre></div></div>

<p><img src="./django2-2.png" alt="" /></p>

<p>According to documentation, Migrations are Django‚Äôs way of propagating changes you make to your models (adding a field, deleting a model, etc.) into your database schema. They‚Äôre designed to be mostly automatic, but you‚Äôll need to know when to make migrations when to run them, and the common problems you might run into.</p>

<p>So let‚Äôs move forward and create a templates folder inside our  todoapp folder. And then create a todo folder inside the templates.</p>

<p>Then I need you to create an HTML file called ‚Äòsignupuser.html‚Äô. If you didn‚Äôt understand whatever I have written here, just look at the project structure</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> |-- todo/
 |    |-- todoapp/                &lt;-- our django app!
 |    |    |-- migrations/
 |    |    |    +-- __init__.py
 |    |    |-- templates/
 |    |    |	+-- todoapp/
 |    |    |			+-- signupuser.html
 |    |    |-- __init__.py
 |    |    |-- admin.py
 |    |    |-- apps.py
 |    |    |-- models.py
 |    |    |-- tests.py
 |    |    +-- views.py
 |    |-- todo/            			&lt;-- our django project folder!
 |    |    |-- __init__.py
 |    |    |-- asgi.py
 |    |    |-- settings.py
 |    |    |-- urls.py
 |    |    |-- wsgi.py
 |    +-- manage.py
</code></pre></div></div>

<p>Here only I have created a folder called templates inside the todoapp, and inside the templates I have created another folder called todoapp. Then inside that I have created a file called signupuser.html.</p>

<p><img src="./django2-4.png" alt="" /></p>

<p>Make sure to follow the same names and same folder structure. If you still get confused, you can checkout my Github repo for code.</p>

<p>Now open the ‚Äòsignupuser.html‚Äô and edit it out with the code below.</p>

<p><strong><em>signupuser.html</em></strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span> Sign Up <span class="nt">&lt;/h1&gt;</span>
</code></pre></div></div>

<p>Now open the views.py inside the todoapp folder and remove the code which was written in our previous section and replace with this code.</p>

<p><strong>views.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="c1"># Create your views here.
</span><span class="k">def</span> <span class="nf">signupuser</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'todoapp/signupuser.html'</span><span class="p">)</span>

</code></pre></div></div>

<p>I hope this code is self explanatory, here in the first line we have imported render, which simply renders HTML  templates. We have already talked about HttpResponse before.</p>

<p>Then we have created a signupuser function which takes a request and it returns us the <em>signupuser.html</em> file.</p>

<p>Let‚Äôs edit the Urls.py file inside our todoapp folder. Remove the code which was written in our previous tutorial and replace with the code below.</p>

<p><strong>Urls.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s">'signup/'</span><span class="p">,</span><span class="n">views</span><span class="p">.</span><span class="n">signupuser</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span><span class="s">'signupuser'</span><span class="p">)</span>
<span class="p">]</span>
</code></pre></div></div>

<p>Again we have went through this code structure in our part-1 of the tutorial series.  Here we have added the path ‚Äúsignup/‚Äù.</p>

<p>Now let‚Äôs run the server</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python manage.py runserver 
</code></pre></div></div>

<p>And go to</p>

<p>http://127.0.0.1:8000/signup/</p>

<p>You will see the page below, if you are not able to see, you have done something wrong in the process.</p>

<p><img src="./django2-3.png" alt="" /></p>

<p>Now just we are simply rendering the HTML templates, for now there‚Äôs nothing except the SignUp header. Later we will add design and make it look good.</p>

<h4 id="basic-sign-up">Basic Sign Up</h4>

<p>Django has some built in tools  that you can use to set up the ability for users to log in and log out of a web application.</p>

<p>The most simple way to implement a user sign up is by using the <a href="https://docs.djangoproject.com/en/3.0/topics/auth/default/"><strong>UserCreationForm</strong></a>. If you are wondering where this form came from, remember Django comes with some of it‚Äôs in built apps. The auth app provides this form.</p>

<p>So now let‚Äôs open view.py and edit it out with the code below.</p>

<p><strong>views.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.forms</span> <span class="kn">import</span> <span class="n">UserCreationForm</span>

<span class="c1"># Create your views here.
</span><span class="k">def</span> <span class="nf">signupuser</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'todoapp/signupuser.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'form'</span><span class="p">:</span><span class="n">UserCreationForm</span><span class="p">()})</span>

</code></pre></div></div>

<p>Here what‚Äôs new in this file, in the 3rd line you can see we have imported the <em>UserCreationForm</em>. This UserCreationForm gives us a basic form and we can pass it forward to our templates.</p>

<p>In the line 8, we have added a dictonary where the key is the form and the value is UserCreationForm() object.</p>

<p>Read more about why we used the dictionary in the above code from <a href="https://docs.djangoproject.com/en/3.0/ref/templates/api/#django.template.Context">documentation.</a></p>

<p>To simply understand now, we can pass the form object to our HTML template by using the UserCreationForm Object. Read more about it <a href="https://docs.djangoproject.com/en/3.0/ref/templates/language/">here.</a></p>

<p>Now let‚Äôs edit signupuser.html file.</p>

<p><strong>signupuser.html</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>SignUp<span class="nt">&lt;/h1&gt;</span>

{{ form }}

</code></pre></div></div>

<p>And now if you run the server and go to http://127.0.0.1:8000/signup/  you will be able to see the page below.</p>

<p><img src="./django2-5.png" alt="" /></p>

<p>So this Django in-built UserCreationForm gives us a basic form. If you didn‚Äôt get the syntax which we have used in the signupuser.html file. You can read more about it <a href="https://docs.djangoproject.com/en/3.0/ref/templates/language/">here.</a></p>

<p>Now let‚Äôs again edit the signupuser.html file.</p>

<p><strong>signupuser.html</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>SignUp<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span><span class="nt">&gt;</span>

{{ form.as_p }}

<span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Sign Up<span class="nt">&lt;/button&gt;</span>

<span class="nt">&lt;/form&gt;</span>

</code></pre></div></div>

<p>Here we have added HTML form. And the method is POST. <em>POST</em> is for writing data, meaning data will be submitted.</p>

<p>Now if you save the file and run the sever you will see the page below</p>

<p><img src="./django2-6.png" alt="" /></p>

<p>Now if you try to fill in some details in the form and if you press submit button you will get this error below. Make sure to try it out so that you understand things better.</p>

<p><img src="./django2-7.png" alt="" /></p>

<p>Now we got the error saying CSRF token missing. To fix this error</p>

<p>Edit this file</p>

<p><strong>signupuser.html</strong></p>

<script src="https://gist.github.com/TheCaffeineDev/5929a348496cfa46ff17f49fc8e12cad.js"></script>

<p>We have added something called <em>csrf_token</em></p>

<p>This is a special token aimed at combating something called Cross Site Request Forgery, which you can learn more about here: <a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)"><strong>Cross-Site Request Forgery (CSRF)</strong></a>.</p>

<p>Now if you try to give some inputs and submit it, you will not get any error.</p>

<p>So that‚Äôs it for this tutorial, I hope you understood most of things from here. Try to read more from the links that I have referenced in the tutorial.</p>

<p>You can get code for this second part from my <a href="https://github.com/TheCaffeineDev/Django-TodoApp/tree/e99688c3e79cfa110ff93d92234d90a797ae180b">Github Repo</a>.</p>

<p>So that‚Äôs it for this tutorial series. I am not going to make any more part on this thing. This part is an optional tutorial of how to think more and build more features if you are building some apps.</p>

<p>Thanks for reading</p>
:ET